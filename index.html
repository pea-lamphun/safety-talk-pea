<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Safety Talk - PEA Lamphun</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  
  <script type="module">
    import React from 'https://esm.sh/react@18.2.0'
    import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client'
    import * as LucideReact from 'https://esm.sh/lucide-react@0.263.1'
    
    // โหลด JSX แบบ dynamic import
    const init = async () => {
      try {
        // สร้าง script tag สำหรับ JSX
        const script = document.createElement('script')
        script.type = 'module'
        script.textContent = `
          import React from 'https://esm.sh/react@18.2.0'
          import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client'
          
          // โหลดโค้ดจากไฟล์
          const response = await fetch('./safety-talk-firebase.jsx')
          const code = await response.text()
          
          // ประมวลผลและรันโค้ด
          const blob = new Blob([code], { type: 'text/javascript' })
          const url = URL.createObjectURL(blob)
          const module = await import(url)
          
          // Render แอพ
          const root = ReactDOM.createRoot(document.getElementById('root'))
          root.render(React.createElement(module.default))
        `
        document.body.appendChild(script)
      } catch (error) {
        console.error('Error:', error)
        document.getElementById('root').innerHTML = \`
          <div style="padding: 40px; max-width: 600px; margin: 0 auto; font-family: sans-serif;">
            <h2 style="color: #ef4444; margin-bottom: 16px;">⚠️ ไม่สามารถโหลดระบบได้</h2>
            <p style="margin-bottom: 12px;">กรุณาตรวจสอบว่าไฟล์ <strong>safety-talk-firebase.jsx</strong> อยู่ในโฟลเดอร์เดียวกัน</p>
            <p style="color: #666; font-size: 14px;">Error: \${error.message}</p>
            <hr style="margin: 24px 0; border: none; border-top: 1px solid #ddd;" />
            <p style="color: #666; font-size: 14px;">
              <strong>วิธีแก้:</strong><br/>
              1. กลับไปหน้า Repository<br/>
              2. ตรวจสอบว่ามีไฟล์ safety-talk-firebase.jsx<br/>
              3. ถ้าไม่มี → อัพโหลดไฟล์
            </p>
          </div>
        \`
      }
    }
    
    init()
  </script>
</body>
</html>
