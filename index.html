<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Safety Talk - PEA Lamphun</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React UMD -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel Standalone -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  
  <!-- Load JSX file และ compile ด้วย Babel -->
  <script>
    // โหลดไฟล์ JSX
    fetch('./safety-talk-firebase.jsx')
      .then(response => response.text())
      .then(jsxCode => {
        // ลบ import statements ออก (เพราะใช้ UMD แทน)
        let code = jsxCode
          .replace(/import\s+React.*from\s+['"]react['"];?/g, '')
          .replace(/import\s+{[^}]+}\s+from\s+['"]react['"];?/g, '')
          .replace(/import\s+{[^}]+}\s+from\s+['"]lucide-react['"];?/g, '')
          .replace(/export\s+default\s+/g, 'window.SafetyTalkApp = ');
        
        // เพิ่ม React และ icons จาก global
        const fullCode = `
          const { useState, useRef, useEffect } = React;
          
          // Lucide icons via CDN
          const Camera = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" }), React.createElement('circle', { cx: "12", cy: "13", r: "3" }));
          const MapPin = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" }), React.createElement('circle', { cx: "12", cy: "10", r: "3" }));
          const Clock = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('polyline', { points: "12 6 12 12 16 14" }));
          const Users = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }), React.createElement('circle', { cx: "9", cy: "7", r: "4" }), React.createElement('path', { d: "M23 21v-2a4 4 0 0 0-3-3.87" }), React.createElement('path', { d: "M16 3.13a4 4 0 0 1 0 7.75" }));
          const CheckCircle = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M22 11.08V12a10 10 0 1 1-5.93-9.14" }), React.createElement('polyline', { points: "22 4 12 14.01 9 11.01" }));
          const XCircle = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('line', { x1: "15", y1: "9", x2: "9", y2: "15" }), React.createElement('line', { x1: "9", y1: "9", x2: "15", y2: "15" }));
          const Calendar = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('rect', { x: "3", y: "4", width: "18", height: "18", rx: "2", ry: "2" }), React.createElement('line', { x1: "16", y1: "2", x2: "16", y2: "6" }), React.createElement('line', { x1: "8", y1: "2", x2: "8", y2: "6" }), React.createElement('line', { x1: "3", y1: "10", x2: "21", y2: "10" }));
          const TrendingUp = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('polyline', { points: "23 6 13.5 15.5 8.5 10.5 1 18" }), React.createElement('polyline', { points: "17 6 23 6 23 12" }));
          const AlertCircle = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('line', { x1: "12", y1: "8", x2: "12", y2: "12" }), React.createElement('line', { x1: "12", y1: "16", x2: "12.01", y2: "16" }));
          const Settings = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('circle', { cx: "12", cy: "12", r: "3" }), React.createElement('path', { d: "M12 1v6m0 6v6m5.2-14.2l-4.2 4.2m0 6l-4.2 4.2M23 12h-6m-6 0H1m19-5.2l-4.2 4.2m0 6l-4.2 4.2M6.8 6.8l4.2 4.2m0 6l4.2 4.2" }));
          const QrCode = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('rect', { x: "3", y: "3", width: "5", height: "5" }), React.createElement('rect', { x: "16", y: "3", width: "5", height: "5" }), React.createElement('rect', { x: "3", y: "16", width: "5", height: "5" }), React.createElement('rect', { x: "13", y: "13", width: "2", height: "2" }), React.createElement('rect', { x: "13", y: "16", width: "2", height: "2" }), React.createElement('rect', { x: "16", y: "13", width: "2", height: "2" }), React.createElement('rect', { x: "19", y: "13", width: "2", height: "2" }), React.createElement('rect', { x: "16", y: "16", width: "2", height: "2" }), React.createElement('rect', { x: "19", y: "16", width: "2", height: "2" }), React.createElement('rect', { x: "19", y: "19", width: "2", height: "2" }));
          const Download = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }), React.createElement('polyline', { points: "7 10 12 15 17 10" }), React.createElement('line', { x1: "12", y1: "15", x2: "12", y2: "3" }));
          const Upload = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }), React.createElement('polyline', { points: "17 8 12 3 7 8" }), React.createElement('line', { x1: "12", y1: "3", x2: "12", y2: "15" }));
          const UserPlus = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }), React.createElement('circle', { cx: "8.5", cy: "7", r: "4" }), React.createElement('line', { x1: "20", y1: "8", x2: "20", y2: "14" }), React.createElement('line', { x1: "23", y1: "11", x2: "17", y2: "11" }));
          const Edit2 = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" }));
          const Trash2 = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('polyline', { points: "3 6 5 6 21 6" }), React.createElement('path', { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" }), React.createElement('line', { x1: "10", y1: "11", x2: "10", y2: "17" }), React.createElement('line', { x1: "14", y1: "11", x2: "14", y2: "17" }));
          const Search = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('circle', { cx: "11", cy: "11", r: "8" }), React.createElement('path', { d: "m21 21-4.35-4.35" }));
          const FileText = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), React.createElement('polyline', { points: "14 2 14 8 20 8" }), React.createElement('line', { x1: "16", y1: "13", x2: "8", y2: "13" }), React.createElement('line', { x1: "16", y1: "17", x2: "8", y2: "17" }), React.createElement('polyline', { points: "10 9 9 9 8 9" }));
          const BarChart3 = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('path', { d: "M3 3v18h18" }), React.createElement('path', { d: "M18 17V9" }), React.createElement('path', { d: "M13 17V5" }), React.createElement('path', { d: "M8 17v-3" }));
          const Filter = ({ size, className }) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className }, React.createElement('polygon', { points: "22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" }));
          
          ${code}
        `;
        
        // Compile JSX ด้วย Babel
        const compiledCode = Babel.transform(fullCode, {
          presets: ['react']
        }).code;
        
        // Execute code
        eval(compiledCode);
        
        // Render app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(window.SafetyTalkApp));
      })
      .catch(error => {
        console.error('Error:', error);
        document.getElementById('root').innerHTML = `
          <div style="padding: 40px; max-width: 600px; margin: 0 auto; font-family: sans-serif;">
            <h2 style="color: #ef4444; margin-bottom: 16px;">⚠️ ไม่สามารถโหลดระบบได้</h2>
            <p style="margin-bottom: 12px;">กรุณาตรวจสอบว่าไฟล์ <strong>safety-talk-firebase.jsx</strong> อยู่ในโฟลเดอร์เดียวกัน</p>
            <p style="color: #666; font-size: 14px;">Error: ${error.message}</p>
          </div>
        `;
      });
  </script>
</body>
</html>
